var $form = $('#addQuestionForm');
$form.html("");
$form.append('<%= j render :partial => "questions/edit", :locals => { :question => @question, :quiz => @quiz } %>');

var questionId = '<%= @question.id %>';
var $selectedLink = $('[data-question="' + questionId + '"]');
var $nonselectedLinks = $('.questionLinks').not('[data-question="' + questionId + '"]');

if ( $form.is(':visible') ) {
	$nonselectedLinks.parent().removeClass('disabledLinks')
		.unbind('click');
	$('#linkbar a').removeClass('disabledLinks')
		.unbind('click');
	$form.slideToggle();
	$selectedLink.parent().next().hide();
} else {
	$nonselectedLinks.parent().addClass('disabledLinks')
		.bind('click', function(e) {
			e.preventDefault();
			e.stopPropagation();
		});

	$('#linkbar a').addClass('disabledLinks')
		.bind('click', function(e) {
			e.preventDefault();
			e.stopPropagation();
		});

	$form.slideToggle();
	$selectedLink.parent().next().css('display', 'inline-block');

	if ( $('#question_multiple_choice_true').prop('checked') === true ) {
		$('#answersForm').slideToggle();
	}
}
myApp.multipleChoiceQuestion();